(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83616696"],{8127:function(t,a,e){"use strict";e.d(a,"d",function(){return i}),e.d(a,"a",function(){return r}),e.d(a,"b",function(){return s}),e.d(a,"e",function(){return o}),e.d(a,"f",function(){return c}),e.d(a,"c",function(){return p});var n=e("66df"),i=function(t){return n["a"].request({url:"api/crop/page",method:"get",params:t})},r=function(t){return n["a"].request({url:"api/record/page",method:"get",params:t})},s=function(t){return n["a"].request({url:"api/farm/linkage/menu",method:"get",params:t})},o=function(t){return n["a"].request({url:"api/record/assess",method:"post",data:t})},c=function(t){return n["a"].request({url:"api/record/updateAssess",method:"put",data:t})},p=function(t){return n["a"].request({url:"api/record/next",method:"get",params:t})}},a364:function(t,a,e){},c1d0:function(t,a,e){"use strict";var n=e("a364"),i=e.n(n);i.a},e6b8:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.pageName},[e("div",{class:t.pageName+"-form"},[e("Select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择农场"},on:{"on-change":t.onChangeFarmType},model:{value:t.params.farmId,callback:function(a){t.$set(t.params,"farmId",a)},expression:"params.farmId"}},t._l(t.optionFarm,function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])}),1),e("Select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择地块"},model:{value:t.params.plotId,callback:function(a){t.$set(t.params,"plotId",a)},expression:"params.plotId"}},t._l(t.optionFarmPlan,function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])}),1),e("Select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择种植状态"},model:{value:t.params.status,callback:function(a){t.$set(t.params,"status",a)},expression:"params.status"}},[e("Option",{attrs:{value:1}},[t._v("未开始")]),e("Option",{attrs:{value:0}},[t._v("种植中")]),e("Option",{attrs:{value:2}},[t._v("已终止")])],1),e("Select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择年份"},model:{value:t.params.date,callback:function(a){t.$set(t.params,"date",a)},expression:"params.date"}},t._l(t.optionYear,function(a){return e("Option",{key:a,attrs:{value:a}},[t._v(t._s(a))])}),1),e("i-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"ios-search"},on:{click:t.search}},[t._v("查询")]),e("i-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("导出")])],1),e("div",{class:t.pageName+"-data"},[e("Table",{attrs:{loading:t.loading,border:"",columns:t.dataColumns,data:t.dataList}}),e("Page",{staticClass:"table-pagination",attrs:{total:t.pagination.total,"page-size":t.pagination.pageSize,size:"small","show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.onChange,"on-page-size-change":t.onPageSizeChange}})],1)])},i=[],r=e("8127"),s=e("c276"),o=e("f121"),c="DataScore",p={name:c,filters:{status:function(t){return 0===t?"种植中":1===t?"已终止":"--"}},data:function(){return{pageName:c,params:{farmId:"",date:(new Date).getFullYear(),plotId:"",pageNo:1,pageSize:20,status:0},optionFarm:[],optionYear:Object(s["k"])(),optionFarmPlan:[],dataColumns:[{title:"地块",key:"plotName",minWidth:100},{title:"作物",key:"cropName",minWidth:100},{title:"品种",key:"cropVariety",minWidth:150},{title:"分值",key:"score",minWidth:100},{title:"总分",key:"rawScore",minWidth:100},{title:"状态",key:"status",minWidth:100}],dataList:[],loading:!1,pagination:{total:0,current:1,pageSize:20}}},watch:{optionFarm:function(t){t.length>0&&(this.params.farmId=t[0].id,this.axiosGetPlan({farmId:t[0].id}))}},created:function(){this.axiosGetDataFarm()},methods:{search:function(){this.axiosGetScoreList(this.params)},exportExcel:function(){var t=this.params.plotId?"&plotId=".concat(this.params.plotId):"",a=this.params.date?"&plotId=".concat(this.params.date):"",e=this.params.status?"&plotId=".concat(this.params.status):"";window.open("".concat(o["a"].baseUrl.pro,"api/crop/export?farmId=").concat(this.params.farmId).concat(t).concat(a).concat(e))},onChangeFarmType:function(t){this.axiosGetPlan({farmId:t})},onChange:function(t){this.params.pageNo=t,this.axiosGetScoreList(this.params)},onPageSizeChange:function(t){this.params.pageSize=t,this.params.pageNo=1,this.axiosGetScoreList(this.params)},axiosGetDataFarm:function(){var t=this;Object(r["b"])().then(function(a){200===a.status&&(t.optionFarm=a.data)})},axiosGetPlan:function(t){var a=this;Object(r["b"])(t).then(function(t){200===t.status&&(a.optionFarmPlan=t.data,a.params.plotId=t.data.length>0?t.data[0].id:"")})},axiosGetScoreList:function(t){var a=this;this.loading=!0,Object(r["d"])(t).then(function(t){if(200===t.status){var e=t.data,n=e.list,i=e.total;a.pagination.total=i,a.dataList=n}a.loading=!1})}}},l=p,u=(e("c1d0"),e("2877")),d=Object(u["a"])(l,n,i,!1,null,null,null);a["default"]=d.exports}}]);