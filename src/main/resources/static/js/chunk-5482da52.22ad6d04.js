(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5482da52"],{1637:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.pageName},[a("Form",{ref:"formEditUser",attrs:{model:e.formData,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"用户名称",prop:"username"}},[a("Input",{staticStyle:{width:"300px"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),a("FormItem",{attrs:{label:"用户电话",prop:"mobile"}},[a("Input",{staticStyle:{width:"300px"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),a("FormItem",{attrs:{label:"用户邮箱"}},[a("Input",{staticStyle:{width:"300px"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit("formEditUser")}}},[e._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:e.disabled,loading:e.resetLoading},on:{click:e.resetPWD}},[e._v("重置密码")])],1)],1)],1)},n=[],i=a("cebc"),u=(a("7f7f"),a("c5f6"),a("8593")),s="SystemUserEdit",o={name:s,data:function(){return{pageName:s,formData:{username:"",email:"",mobile:""},ruleValidate:{username:[{required:!0,message:"请填写用户名称",trigger:"blur"}],mobile:[{required:!0,message:"请填写用户电话",trigger:"blur"}]},loading:!1,resetLoading:!1}},computed:{user_id:function(){return this.$route.query.id?Number(this.$route.query.id):null},disabled:function(){return!this.$route.query.id},pageType:function(){return this.$route.query.id?"edit":"add"}},created:function(){this.$route.query.id&&this.getUserInfo(this.$route.query.id)},methods:{handleSubmit:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){e?"add"===t.pageType?t.addUserResult(t.formData):"edit"===t.pageType&&t.editUserResult(Object(i["a"])({},t.formData,{adminId:t.user_id})):t.loading=!1})},resetPWD:function(){var e=this;this.$Modal.confirm({title:"提示",content:"<p>将密码重置为'123456'，是否继续？</p>",onOk:function(){e.axiosResetPwd({adminId:e.user_id})}})},addUserResult:function(e){var t=this;Object(u["a"])(e).then(function(e){200===e.status?(t.$Message.success("添加用户成功"),t.formData={username:"",email:"",mobile:""},t.$router.go(-1)):t.$Message.warning("添加用户失败"),t.loading=!1})},editUserResult:function(e){var t=this;Object(u["i"])(e).then(function(e){200===e.status?(t.$Message.success("编辑用户成功"),t.formData={username:"",email:"",mobile:""},t.$router.go(-1)):t.$Message.warning("编辑用户失败"),t.loading=!1})},getUserInfo:function(e){var t=this;console.log(e),Object(u["b"])(e).then(function(e){if(200===e.status){var a=e.data;a&&(t.formData={username:a.username,email:a.email,mobile:a.mobile})}})},axiosResetPwd:function(e){var t=this;this.resetLoading=!0,Object(u["h"])(e).then(function(e){200===e.status?t.$Message.success("重置密码成功"):t.$Message.success("重置密码失败")})}}},d=o,l=a("2877"),m=Object(l["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports},8593:function(e,t,a){"use strict";a.d(t,"g",function(){return n}),a.d(t,"a",function(){return i}),a.d(t,"i",function(){return u}),a.d(t,"b",function(){return s}),a.d(t,"h",function(){return o}),a.d(t,"d",function(){return d}),a.d(t,"f",function(){return l}),a.d(t,"e",function(){return m}),a.d(t,"c",function(){return c});var r=a("66df"),n=function(e){return r["a"].request({url:"api/admin/page",method:"get",params:e})},i=function(e){return r["a"].request({url:"api/admin/add",method:"post",data:e})},u=function(e){return r["a"].request({url:"api/admin/update",method:"PUT",data:e})},s=function(e){return r["a"].request({url:"api/admin/"+e,method:"get"})},o=function(e){return r["a"].request({url:"api/admin/reset",method:"post",data:e})},d=function(e){return r["a"].request({url:"api/admin/"+e,method:"DELETE"})},l=function(e){return r["a"].request({url:"api/role/edit",method:"get",params:e})},m=function(e){return r["a"].request({url:"api/role/edit_save",method:"post",data:e})},c=function(e){return r["a"].request({url:"api/admin/updatePassword",method:"post",data:e})}}}]);