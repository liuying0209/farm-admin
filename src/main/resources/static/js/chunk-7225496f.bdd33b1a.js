(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7225496f"],{"2d1b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.pageName},[a("Form",{ref:"formEditUser",attrs:{model:e.formData,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"角色名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:e.disabled},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"权限"}},[a("div",{staticClass:"form-tree"},[a("Tree",{ref:"formTree",attrs:{data:e.routers,"show-checkbox":""}})],1)]),a("FormItem",[e.isHide?a("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit("formEditUser")}}},[e._v("提交")]):e._e()],1)],1)],1)},r=[],i=(a("6762"),a("2fdb"),a("75fc")),o=(a("7f7f"),a("8593")),u="SystemRoleEdit",d={name:u,data:function(){return{pageName:u,formData:{name:""},ruleValidate:{name:[{required:!0,message:"请填写角色名称",trigger:"blur"}]},routers:[],loading:!1,isHide:!1,disabled:!0}},computed:{user_id:function(){return this.$route.query.id}},created:function(){this.axiosGetRolePermissionInfo({id:this.user_id})},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.loading=!0;var a=t.$refs["formTree"].getCheckedNodes(),n=Object(i["a"])(a);a.map(function(e){n.map(function(t){e.id===t.pid&&(t.delete=!0)})});var r=[];n.map(function(e){e.delete||r.push(e.code)}),t.axiosEditSave({name:t.formData.name,code:r})}else t.loading=!1})},axiosGetRolePermissionInfo:function(e){var t=this;Object(o["f"])(e).then(function(e){if(200===e.status){var a=e.data,n=a.info,r=a.menu,i=a.role_code;t.formData.name=n.role_name||"",t.disabled=!!n.role_name,t.isHide=0!==n.type,t.routers=t.getTreeData(r,i)}})},axiosEditSave:function(e){var t=this;Object(o["e"])(e).then(function(e){if(200===e.status){var a=e.data,n=a.status,r=a.msg;0===n?(t.$Message.success(r),t.$router.go(-1)):t.$Message.warning(r)}t.loading=!0})},getTreeData:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(e){e.title=e.name,e.expand=!0,a&&a.includes(e.code)&&(e.checked=!0),e.children&&e.children.length>0&&t.getTreeData(e.children,a)}),e}}},s=d,c=(a("c7d4"),a("2877")),f=Object(c["a"])(s,n,r,!1,null,"79444ba0",null);t["default"]=f.exports},8593:function(e,t,a){"use strict";a.d(t,"g",function(){return r}),a.d(t,"a",function(){return i}),a.d(t,"i",function(){return o}),a.d(t,"b",function(){return u}),a.d(t,"h",function(){return d}),a.d(t,"d",function(){return s}),a.d(t,"f",function(){return c}),a.d(t,"e",function(){return f}),a.d(t,"c",function(){return m});var n=a("66df"),r=function(e){return n["a"].request({url:"api/admin/page",method:"get",params:e})},i=function(e){return n["a"].request({url:"api/admin/add",method:"post",data:e})},o=function(e){return n["a"].request({url:"api/admin/update",method:"PUT",data:e})},u=function(e){return n["a"].request({url:"api/admin/"+e,method:"get"})},d=function(e){return n["a"].request({url:"api/admin/reset",method:"post",data:e})},s=function(e){return n["a"].request({url:"api/admin/"+e,method:"DELETE"})},c=function(e){return n["a"].request({url:"api/role/edit",method:"get",params:e})},f=function(e){return n["a"].request({url:"api/role/edit_save",method:"post",data:e})},m=function(e){return n["a"].request({url:"api/admin/updatePassword",method:"post",data:e})}},b476:function(e,t,a){},c7d4:function(e,t,a){"use strict";var n=a("b476"),r=a.n(n);r.a}}]);