(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e012c6a"],{"2b74":function(t,a,e){"use strict";e.d(a,"f",function(){return r}),e.d(a,"d",function(){return i}),e.d(a,"a",function(){return s}),e.d(a,"e",function(){return o}),e.d(a,"b",function(){return u}),e.d(a,"i",function(){return d}),e.d(a,"h",function(){return c}),e.d(a,"j",function(){return p}),e.d(a,"k",function(){return l}),e.d(a,"c",function(){return m}),e.d(a,"g",function(){return f});var n=e("66df"),r=function(t){return n["a"].request({url:"api/farm/page",method:"get",params:t})},i=function(){return n["a"].request({url:"api/farm/get_farmer",method:"get"})},s=function(t){return n["a"].request({url:"api/farm/add",method:"post",data:t})},o=function(t){return n["a"].request({url:"api/farm/get_farm_info",method:"get",params:t})},u=function(t){return n["a"].request({url:"api/farm/"+t,method:"DELETE"})},d=function(t){return n["a"].request({url:"api/task/page",method:"get",params:t})},c=function(t){return n["a"].request({url:"api/task/"+t,method:"get"})},p=function(t){return n["a"].request({url:"api/task/add",method:"post",data:t})},l=function(t){return n["a"].request({url:"api/task/update",method:"put",data:t})},m=function(t){return n["a"].request({url:"api/task/"+t,method:"DELETE"})},f=function(t){return n["a"].request({url:"api/farm/work/list",method:"get"})}},"3c39":function(t,a,e){},8127:function(t,a,e){"use strict";e.d(a,"d",function(){return r}),e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s}),e.d(a,"e",function(){return o}),e.d(a,"f",function(){return u}),e.d(a,"c",function(){return d});var n=e("66df"),r=function(t){return n["a"].request({url:"api/crop/page",method:"get",params:t})},i=function(t){return n["a"].request({url:"api/record/page",method:"get",params:t})},s=function(t){return n["a"].request({url:"api/farm/linkage/menu",method:"get",params:t})},o=function(t){return n["a"].request({url:"api/record/assess",method:"post",data:t})},u=function(t){return n["a"].request({url:"api/record/updateAssess",method:"put",data:t})},d=function(t){return n["a"].request({url:"api/record/next",method:"get",params:t})}},"869c":function(t,a,e){"use strict";var n=e("3c39"),r=e.n(n);r.a},ea91:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:t.pageName},[e("div",{class:t.pageName+"-form"},[e("Button",{staticClass:"form-add",attrs:{icon:"md-add",type:"primary"},on:{click:t.toFarmEdit}},[t._v("新增")]),e("div",{staticClass:"form-right-div"},[e("div",{staticStyle:{width:"50%","margin-right":"10px"}},[e("Select",{attrs:{placeholder:"请选择作物类型"},on:{"on-change":t.onChangeFarmType},model:{value:t.params.cropId,callback:function(a){t.$set(t.params,"cropId",a)},expression:"params.cropId"}},[e("Option",{attrs:{value:0}},[t._v("全部作物")]),t._l(t.optionCrops,function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})],2)],1)])],1),e("div",{class:t.pageName+"-data"},[e("Table",{attrs:{loading:t.loading,border:"",columns:t.dataColumns,data:t.dataList},scopedSlots:t._u([{key:"update_time",fn:function(a){var n=a.row;return[e("div",[e("span",[t._v(t._s(n.updateTime))])])]}},{key:"handle",fn:function(a){var n=a.row;return[e("div",[e("Poptip",{attrs:{trigger:"hover",title:"",content:"编辑农场"}},[e("Button",{attrs:{size:"small",icon:"md-create",type:"success"},on:{click:function(a){return t.handleEditFarm(n)}}})],1),e("Poptip",{attrs:{trigger:"hover",title:"",content:"删除农场"}},[e("Button",{attrs:{size:"small",icon:"md-trash",type:"error"},on:{click:function(a){return t.handleDelete(n)}}})],1)],1)]}}])}),e("Page",{staticClass:"table-pagination",attrs:{total:t.pagination.total,"page-size":t.pagination.pageSize,size:"small","show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.onChange,"on-page-size-change":t.onPageSizeChange}})],1)])},r=[],i=(e("8127"),e("2b74")),s=e("90de"),o="BasicTask",u={name:o,filters:{getRelativeTime:s["b"]},data:function(){return{pageName:o,loading:!1,optionCrops:[{id:1,name:"大番茄"},{id:2,name:"小番茄"},{id:3,name:"辣椒"},{id:4,name:"茄子"},{id:5,name:"黄瓜"}],dataColumns:[{title:"农事环节",key:"farmingName",minWidth:150},{title:"类型",key:"desc",minWidth:40},{title:"分值",key:"score",minWidth:80},{title:"排序",key:"number",minWidth:80},{title:"更新日期",slot:"update_time",minWidth:150},{title:"操作",slot:"handle",minWidth:150}],dataList:[],pagination:{total:0,current:1,pageSize:20},params:{cropId:"",pageNo:1,pageSize:20}}},created:function(){this.axiosGetTaskListPaginate(this.params)},methods:{toFarmEdit:function(){this.$router.push({name:"basicTaskEdit"})},onChangeFarmType:function(t){this.params.cropId=t,this.axiosGetTaskListPaginate(this.params)},handleEditFarm:function(t){this.$router.push({name:"basicTaskEdit",query:{id:t.taskId}})},handleDelete:function(t){var a=this;this.$Modal.confirm({title:"提示",content:"<p>你确认要删除这条记录吗？</p>",onOk:function(){a.axiosDeleteTask(t.taskId)}})},onChange:function(t){this.params.pageNo=t,this.axiosGetTaskListPaginate(this.params)},onPageSizeChange:function(t){this.params.pageSize=t,this.params.pageNo=1,this.axiosGetTaskListPaginate(this.params)},axiosGetTaskListPaginate:function(t){var a=this;this.loading=!0,Object(i["i"])(t).then(function(t){if(200===t.status){var e=t.data;a.pagination.total=e.total,a.dataList=e.list}else a.$Message.warning(t.message);a.loading=!1})},axiosDeleteTask:function(t){var a=this;Object(i["c"])(t).then(function(t){200===t.status?(a.$Message.success("删除农事环节成功"),a.axiosGetTaskListPaginate(a.params)):a.$Message.error("删除农事环节失败")})}}},d=u,c=(e("869c"),e("2877")),p=Object(c["a"])(d,n,r,!1,null,null,null);a["default"]=p.exports}}]);