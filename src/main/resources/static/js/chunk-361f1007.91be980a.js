(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-361f1007"],{"2b74":function(t,a,r){"use strict";r.d(a,"f",function(){return n}),r.d(a,"d",function(){return o}),r.d(a,"a",function(){return i}),r.d(a,"e",function(){return u}),r.d(a,"b",function(){return s}),r.d(a,"i",function(){return c}),r.d(a,"h",function(){return f}),r.d(a,"j",function(){return m}),r.d(a,"k",function(){return d}),r.d(a,"c",function(){return l}),r.d(a,"g",function(){return p});var e=r("66df"),n=function(t){return e["a"].request({url:"api/farm/page",method:"get",params:t})},o=function(){return e["a"].request({url:"api/farm/get_farmer",method:"get"})},i=function(t){return e["a"].request({url:"api/farm/add",method:"post",data:t})},u=function(t){return e["a"].request({url:"api/farm/get_farm_info",method:"get",params:t})},s=function(t){return e["a"].request({url:"api/farm/"+t,method:"DELETE"})},c=function(t){return e["a"].request({url:"api/task/page",method:"get",params:t})},f=function(t){return e["a"].request({url:"api/task/"+t,method:"get"})},m=function(t){return e["a"].request({url:"api/task/add",method:"post",data:t})},d=function(t){return e["a"].request({url:"api/task/update",method:"put",data:t})},l=function(t){return e["a"].request({url:"api/task/"+t,method:"DELETE"})},p=function(t){return e["a"].request({url:"api/farm/work/list",method:"get"})}},"37d3":function(t,a,r){"use strict";r.r(a);var e=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{class:t.pageName},[r("Form",{ref:"formEditTask",attrs:{model:t.formData,rules:t.ruleValidate,"label-width":120}},[r("FormItem",{attrs:{label:"作物类型",prop:"cropId"}},[r("Select",{staticStyle:{width:"500px"},attrs:{placeholder:"请选择作物类型"},model:{value:t.formData.cropId,callback:function(a){t.$set(t.formData,"cropId",a)},expression:"formData.cropId"}},[r("Option",{attrs:{value:"1"}},[t._v("大番茄")]),r("Option",{attrs:{value:"2"}},[t._v("小番茄")]),r("Option",{attrs:{value:"3"}},[t._v("辣椒")]),r("Option",{attrs:{value:"4"}},[t._v("茄子")]),r("Option",{attrs:{value:"5"}},[t._v("黄瓜")])],1)],1),r("FormItem",{attrs:{label:"农事环节类型",prop:"farmingId"}},[r("Select",{staticStyle:{width:"500px"},attrs:{placeholder:"请选择作物类型"},model:{value:t.formData.farmingId,callback:function(a){t.$set(t.formData,"farmingId",a)},expression:"formData.farmingId"}},t._l(t.optionFarmWorlList,function(a){return r("Option",{key:a.id,attrs:{value:a.id.toString()}},[t._v(t._s(a.detail))])}),1)],1),r("FormItem",{attrs:{label:"任务名称",prop:"farmingName"}},[r("Input",{staticStyle:{width:"500px"},model:{value:t.formData.farmingName,callback:function(a){t.$set(t.formData,"farmingName",a)},expression:"formData.farmingName"}})],1),r("FormItem",{attrs:{label:"任务分值"}},[r("Input-number",{staticStyle:{width:"500px"},attrs:{min:0},model:{value:t.formData.score,callback:function(a){t.$set(t.formData,"score",a)},expression:"formData.score"}})],1),r("FormItem",{attrs:{label:"任务排序"}},[r("Input-number",{staticStyle:{width:"500px"},attrs:{min:0},model:{value:t.formData.number,callback:function(a){t.$set(t.formData,"number",a)},expression:"formData.number"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(a){return t.handleSubmit("formEditTask")}}},[t._v("提交")])],1)],1)],1)},n=[],o=(r("6b54"),r("cebc")),i=(r("7f7f"),r("c5f6"),r("2b74")),u="BasicTaskEdit",s={name:u,data:function(){return{pageName:u,formData:{cropId:"",farmingName:"",farmingId:"",score:0,number:0},optionFarmWorlList:[],ruleValidate:{cropId:[{required:!0,message:"请选择作物类型",trigger:"change"}],farmingId:[{required:!0,message:"请选择农事环节类型",trigger:"change"}],farmingName:[{required:!0,message:"请输入任务名称",trigger:"blur"}]},loading:!1}},computed:{type:function(){return this.$route.query.id?"edit":"create"},taskId:function(){return this.$route.query.id?Number(this.$route.query.id):null}},created:function(){this.$route.query.id&&this.axiosGetTaskInfo(this.$route.query.id),this.axiosGetFarmWorkList()},methods:{handleSubmit:function(t){var a=this;this.$refs[t].validate(function(t){t?(a.loading=!0,"create"===a.type?a.axiosTaskAdd(Object(o["a"])({},a.formData,{cropId:Number(a.formData.cropId),farmingId:Number(a.formData.farmingId)})):"edit"===a.type&&a.axiosTaskUpdate(Object(o["a"])({},a.formData,{cropId:Number(a.formData.cropId),farmingId:Number(a.formData.farmingId),id:a.taskId}))):a.loading=!1})},axiosGetTaskInfo:function(t){var a=this;Object(i["h"])(t).then(function(t){if(200===t.status){var r=t.data;a.formData={cropId:r.cropId.toString(),farmingName:r.farmingName,farmingId:r.farmingId.toString(),score:r.score,number:r.number}}})},axiosTaskAdd:function(t){var a=this;Object(i["j"])(t).then(function(t){200===t.status?(a.$Message.success("添加任务成功"),a.$router.go(-1)):a.$Message.success("添加任务失败"),a.loading=!0})},axiosTaskUpdate:function(t){var a=this;Object(i["k"])(t).then(function(t){200===t.status?(a.$Message.success("编辑任务成功"),a.$router.go(-1)):a.$Message.success("编辑任务失败"),a.loading=!0})},axiosGetFarmWorkList:function(){var t=this;Object(i["g"])().then(function(a){200===a.status&&(t.optionFarmWorlList=a.data)})}}},c=s,f=r("2877"),m=Object(f["a"])(c,e,n,!1,null,null,null);a["default"]=m.exports},3846:function(t,a,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"6b54":function(t,a,r){"use strict";r("3846");var e=r("cb7c"),n=r("0bfb"),o=r("9e1e"),i="toString",u=/./[i],s=function(t){r("2aba")(RegExp.prototype,i,t,!0)};r("79e5")(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?n.call(t):void 0)}):u.name!=i&&s(function(){return u.call(this)})}}]);